"use strict";(self["webpackChunkassignment_3_3"]=self["webpackChunkassignment_3_3"]||[]).push([[231],{6231:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"6",xl:"5"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-avatar",{attrs:{color:"black-grey"}},[e.imgUrl?a("v-img",{attrs:{src:e.imgUrl}}):a("v-icon",{attrs:{dense:""}},[e._v("mdi-account-circle")])],1),a("v-toolbar-title",{staticClass:"ml-2 d-block text-center text-uppercase"},[e._v("Edit Profile ")])],1),a("v-card-text",{staticClass:"card"},[a("v-form",{ref:"registerForm",staticClass:"d-flex flex-column",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:e.userNameRules,label:"Username",light:"",required:""},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),a("v-text-field",{attrs:{label:"First Name",light:"",required:""},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{label:"Last Name",light:"",required:""},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),a("v-combobox",{attrs:{items:e.countries,rules:[function(e){return!!e||"Please select country"}],"item-text":"name",label:"Country",light:"",required:""},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.item;return[a("img",{staticClass:"country-icon",attrs:{height:"16",src:s.flag,width:"24"}}),a("span",{staticClass:"mx-2"}),e._v(" "+e._s(s.name)+" ")]}},{key:"item",fn:function(t){var s=t.item;return[a("img",{staticClass:"country-icon",attrs:{height:"16",src:s.flag,width:"24"}}),a("span",{staticClass:"mx-2"}),e._v(" "+e._s(s.name)+" ")]}}]),model:{value:e.country,callback:function(t){e.country=t},expression:"country"}})],1),a("v-col",[a("v-text-field",{attrs:{rules:e.passwordRules,label:"Old Password",type:"password",required:"",light:""},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),a("v-text-field",{attrs:{rules:e.passwordRules,label:"New Password",light:"",required:"",type:"password"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),a("v-text-field",{attrs:{label:"Email",light:"",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("form",{ref:"imageUpload",staticClass:"d-flex align-center",attrs:{enctype:"multipart/form-data"}},[a("v-file-input",{staticClass:"flex-grow-1",attrs:{accept:"image/*",label:"Upload New Picture",light:"",required:"",name:"file",id:"imageInput"},model:{value:e.imgObj,callback:function(t){e.imgObj=t},expression:"imgObj"}}),a("v-btn",{staticClass:"ml-4 small white--text",attrs:{loading:e.loading,color:"blue-grey",fab:"",outlined:"",small:""},on:{click:e.performUpload}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-cloud-upload")])],1)],1)],1)],1)],1)],1),a("v-card-actions",{staticClass:"d-flex flex-column card"},[a("v-btn",{staticClass:"mb-4 align-self-stretch",attrs:{disabled:!e.valid,color:"success",light:""},on:{click:e.validateCredentials}},[e._v("Update ")])],1)],1)],1)],1)],1)},l=[],r=a(7673),i=a(6198),n=(a(4916),a(3123),a(8309),a(4540)),o=a(7848),c=a(5210),u=a(8516);const m={data:function(){return{valid:!0,userName:"",userNameRules:u.v,oldPassword:"",passwordRules:u.d,newPassword:"",firstName:"",lastName:"",countries:o,country:"",email:"",imgUrl:"",imgObj:{},loading:!1}},created:function(){var e=this.$store.getters.currentUser;this.userName=e.login,this.imgUrl=e.avatar,this.firstName=e.fullname.split(" ")[0],this.lastName=e.fullname.split(" ")[1],this.email=e.email,this.country=e.country},methods:{performUpload:function(){var e=this;return(0,i.Z)((0,r.Z)().mark((function t(){var a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.imgObj.name){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,a=new FormData,a.append("image",e.imgObj,e.imgObj.name),t.next=7,c.Z.uploadImg(a);case 7:e.imgUrl=t.sent,e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},validateCredentials:function(){var e=this;if(this.$refs.registerForm.validate()){var t={login:this.userName,password:this.newPassword,role:"Client",avatar:this.imgUrl,fullname:this.firstName+" "+this.lastName,country:this.country.name,email:this.email,is_blocked:!1,question:"Place of Birth?",answer:"Dimona"};n.Z.updateUser(t).then((function(){return e.$router.push("/")}))["catch"]((function(e){return console.log(e)}))}}}},d=m;var f=a(1001),v=(0,f.Z)(d,s,l,!1,null,null,null);const g=v.exports}}]);
//# sourceMappingURL=231.9054060f.js.map